<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search & Filter</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome (Search + Plus icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- Bootstrap Icons (Funnel Filter icon) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Custom CSS to force dropdowns downward -->
  <style>
    /* Allow dropdowns to appear downward */
    .card-body, .d-flex {
      overflow: visible !important;
    }

    .d-flex {
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .d-flex > div {
      flex: 1 1 auto;
      min-width: 13.75rem;
    }

    .btn {
      min-height: 2.75rem;
    }

    @media (max-width: 768px) {
      .d-flex {
        flex-direction: column;
        align-items: stretch;
      }

      .d-flex > div {
        min-width: 100%;
      }

      .ms-auto {
        margin-left: 0 !important;
        margin-top: 1rem;
      }
    }
  </style>
</head>
<body class="p-3">

<!-- Search & Filter Section -->
<form action="/admin/search" method="GET"
      class="card mb-4 shadow-sm"
      style="background-color: #0000007b;">
  <div class="card-body py-2">

    <!-- FLEX LAYOUT -->
    <div class="d-flex align-items-center gap-3">

      <!-- Search -->
      <div style="width: 220px;">
        <div class="input-group input-group-sm">
          <span class="input-group-text bg-white">
            <i class="fas fa-search"></i>
          </span>
          <input type="text"
                 name="q"
                 class="form-control"
                 placeholder="Search"
                 value="<%= searchValue || '' %>">
        </div>
      </div>

      <!-- State -->
      <div style="width: 180px;">
        <select name="state" class="form-select form-select-sm">
          <option value="">All States</option>
          <% if (states && states.length > 0) { %>
            <% states.forEach(function(state) { %>
              <option value="<%= state %>" <%= selectedState === state ? 'selected' : '' %>>
                <%= state %>
              </option>
            <% }); %>
          <% } %>
        </select>
      </div>

      <!-- District -->
      <div style="width: 180px;">
        <select name="district" class="form-select form-select-sm">
          <option value="">All Districts</option>
          <% if (districts && districts.length > 0) { %>
            <% districts.forEach(function(district) { %>
              <option value="<%= district %>" <%= selectedDistrict === district ? 'selected' : '' %>>
                <%= district %>
              </option>
            <% }); %>
          <% } %>
        </select>
      </div>

      <!-- Filter Button -->
      <div>
        <button type="submit" class="btn btn-primary btn-sm px-3 shadow-sm">
          <i class="bi bi-funnel me-1"></i> Filter
        </button>
      </div>

      <!-- Push Add Family to Right -->
      <div class="ms-auto">
        <a href="/admin/create-family" class="btn btn-success btn-sm px-3">
          <i class="fas fa-plus me-1"></i> Add Family
        </a>
      </div>

    </div>

  </div>
</form>

</body>
</html>